Query A
=======

PREFIX ex: <http://example.org/webshop#>
PREFIX schema: <http://schema.org/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
# A) For a given item, provide all its categories/subcategories and its brand.
SELECT ?itemLabel ?brandName ?categoryLabel WHERE {
  VALUES ?item { ex:prod001 }
  ?item rdfs:label ?itemLabel ;
        ex:hasBrand ?brand ;
        ex:inCategory ?category .
  ?brand rdfs:label ?brandName .
  ?category rdfs:label ?categoryLabel .
}


RESULTS:
ERGO M575 Wireless Trackball for Business | Logitech | ComputerMice


Query B
=======

PREFIX ex: <http://example.org/webshop#>
PREFIX schema: <http://schema.org/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
# B) Items from different subcategories that share the same brand.
SELECT ?brandName ?item1Label ?category1Label ?item2Label ?category2Label WHERE {
  ?item1 ex:hasBrand ?brand ; 
         ex:inCategory ?category1 ; 
         rdfs:label ?item1Label .
  ?item2 ex:hasBrand ?brand ; 
         ex:inCategory ?category2 ; 
         rdfs:label ?item2Label .
  ?brand rdfs:label ?brandName .
  ?category1 rdfs:label ?category1Label .
  ?category2 rdfs:label ?category2Label .
  FILTER(?item1 != ?item2 && ?category1 != ?category2)
  FILTER(STR(?item1) < STR(?item2))   # avoid symmetric duplicates
}
ORDER BY ?brandName ?item1Label ?item2Label
LIMIT 10


RESULTS:
Logitech | BOOM 3 | Speakers | BRIO 100 | Webcams
Logitech | BOOM 3 | Speakers | BRIO 305 | Webcams
Logitech | BOOM 3 | Speakers | Brio | Webcams
Logitech | BOOM 3 | Speakers | Brio 105 | Webcams
Logitech | BOOM 3 | Speakers | Brio 300 | Webcams
Logitech | BOOM 3 | Speakers | LOGI DOCK FLEX | ConferenceCameras
Logitech | BOOM 3 | Speakers | Logitech Rally Camera Streamline Kit | ConferenceCameras
Logitech | BOOM 3 | Speakers | Logitech Reach | Webcams
Logitech | BOOM 3 | Speakers | MX Brio | Webcams
Logitech | BOOM 3 | Speakers | MX Brio 705 for Business | Webcams


Query C
=======

PREFIX ex: <http://example.org/webshop#>
PREFIX schema: <http://schema.org/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
# C) Group products by brand and show average price and rating
SELECT ?brandName 
       (AVG(xsd:decimal(?price)) AS ?avgPrice) 
       (AVG(xsd:decimal(?rating)) AS ?avgRating)
       (COUNT(?item) AS ?itemCount) WHERE {
  ?item ex:hasBrand ?brand ; 
        schema:price ?price ;
        schema:ratingValue ?rating .
  ?brand rdfs:label ?brandName .
}
GROUP BY ?brandName
ORDER BY DESC(?avgPrice)


RESULTS:
Logitech | 102.8846052631578947368421053 | 4.248684210526315789473684211 | 76


Query D
=======

PREFIX ex: <http://example.org/webshop#>
PREFIX schema: <http://schema.org/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
# D) Sort products in mice category by average brand price
SELECT ?brandName 
       (AVG(xsd:decimal(?price)) AS ?avgBrandPrice) 
       (AVG(xsd:decimal(?rating)) AS ?avgBrandRating)
       (COUNT(?item) AS ?itemsInCategory) WHERE {
  ?item a ex:Product ; 
        ex:inCategory ex:ComputerMice ; 
        ex:hasBrand ?brand ; 
        schema:price ?price ;
        schema:ratingValue ?rating .
  ?brand rdfs:label ?brandName .
}
GROUP BY ?brandName
ORDER BY DESC(?avgBrandPrice)


RESULTS:
Logitech | 55.19 | 4.153333333333333333333333333 | 15


Query F
=======

PREFIX ex: <http://example.org/webshop#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
# F) Recommend items sharing brand (always true here) and optionally same category
SELECT ?candidateLabel
       (IF(?candidateCategory = ?seedCategory, "SameCategory", "DifferentCategory") AS ?categoryRelation)
WHERE {
  VALUES ?seedItem { ex:prod001 }
  ?seedItem ex:hasBrand ?seedBrand ; ex:inCategory ?seedCategory .

  ?candidate rdfs:label ?candidateLabel ;
             ex:hasBrand ?seedBrand ;
             ex:inCategory ?candidateCategory .
  FILTER(?candidate != ?seedItem)
}
ORDER BY ?categoryRelation ?candidateLabel
LIMIT 10


RESULTS:
BOOM 3 | DifferentCategory
BRIO 100 | DifferentCategory
BRIO 305 | DifferentCategory
Brio | DifferentCategory
Brio 105 | DifferentCategory
Brio 300 | DifferentCategory
CRAYON (USB-C) TIP COVER | DifferentCategory
Casa Pop-Up Desk | DifferentCategory
Combo Touch for iPad Air | DifferentCategory
Combo Touch for iPad Pro | DifferentCategory


Query G
=======

PREFIX ex: <http://example.org/webshop#>
PREFIX schema: <http://schema.org/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
# G) Custom question: "Find mice products under $100 with rating above 4.0"
SELECT ?itemLabel ?price ?rating ?color WHERE {
  ?item a ex:Product ;
        ex:inCategory ex:ComputerMice ;
        schema:price ?price ;
        schema:ratingValue ?rating ;
        schema:color ?color ;
        rdfs:label ?itemLabel .
  
  FILTER(xsd:decimal(?price) < 100.0 && xsd:decimal(?rating) > 4.0)
}
ORDER BY ASC(xsd:decimal(?price))


RESULTS:
Logi USB Type-C to USB Type-C Cable | 9.99 | 4.3 | Graphite
M340 Collection | 17.99 | 4.1 | Speckles
M240 for Business | 24.99 | 4.8 | Graphite
Signature Wired M520 L for Business | 24.99 | 4.3 | Graphite
ERGO M575S | 44.99 | 4.1 | Black + Silver Ball
Signature AI Edition M750 Wireless mouse | 49.99 | 4.7 | Graphite
MX Anywhere 3S for Mac | 79.99 | 4.5 | Pale Grey
MX Anywhere 3S | 89.99 | 4.6 | Black


Query E (for Wikidata)
====================

# E) External SERVICE (Wikidata)
# Copy this query to https://query.wikidata.org/ and run it

PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?property ?propertyLabel ?value ?valueLabel WHERE {
  BIND("Logitech"@en AS ?brandLabel)
  ?brand wdt:P31/wdt:P279* wd:Q4830453 ;
         rdfs:label ?brandLabel .
  
  VALUES ?prop { 
    wdt:P159   # headquarters location
    wdt:P571   # inception date  
    wdt:P112   # founder
    wdt:P154   # logo image
    wdt:P856   # official website
  }
  
  ?brand ?prop ?value .
  ?prop rdfs:label ?property .
  
  OPTIONAL { ?value rdfs:label ?valueLabel }
  
  FILTER(LANG(?brandLabel) = "en")
  FILTER(LANG(?property) = "en") 
  FILTER(!BOUND(?valueLabel) || LANG(?valueLabel) = "en")
}
ORDER BY ?property


